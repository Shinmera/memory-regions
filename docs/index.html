<!DOCTYPE html> <html lang="EN"> <head> <meta charset="utf-8"> <title>Memory Regions</title> <style>html body{margin:0 auto 0 auto;padding:20px;max-width:1024px;font-family:sans-serif;font-size:14pt;overflow-y:scroll;}html body a{text-decoration:none;}html body a[href]{color:#0055AA;}html body a[href]:hover{color:#0088EE;}html body pre{background:#FAFAFA;border:1px solid #DDDDDD;padding:0.75em;overflow-x:auto;}html body pre >code a[href]{color:#223388;}article.project h1{font-size:1.7em;}article.project h1,article.project h2,article.project h3,article.project h4,article.project h5,article.project h6{margin:0.2em 0 0.1em 0;text-indent:1em;}article.project >header{text-align:center;}article.project >header img.logo{display:block;margin:auto;max-height:170px;}article.project >header h1{display:inline-block;text-indent:0;font-size:2.5em;}article.project >header .version{vertical-align:bottom;}article.project >header .languages{margin-top:-0.5em;text-transform:capitalize;}article.project >header .description{margin:0;}article.project >header .pages{margin-top:0.5em;font-size:1.2em;text-transform:capitalize;}article.project >header .pages a{display:inline-block;padding:0 0.2em;}article.project >section{margin:1em 0 1em 0;}article.project >section img{max-width:100%;}article.project #index >ul{list-style:none;margin:0;padding:0;}article.project .row label{display:inline-block;min-width:8em;}article.project #system .row{display:flex;}article.project #system #dependencies{display:inline;margin:0;padding:0;}article.project #system #dependencies li{display:inline;padding:0 0.2em;}article.project #system #author label{vertical-align:top;}article.project #system #author ul{display:inline-block;margin:0;padding:0;list-style:none;}article.project #toc nav>*{margin-left:1em;display:block;}article.definition{margin:1em 0 0 0;}article.definition >header h1,article.definition >header h2,article.definition >header h3,article.definition >header h4,article.definition >header h5,article.definition >header h6{text-indent:0;display:inline-block;}article.definition >header ul{display:inline-block;list-style:none;margin:0;padding:0;}article.definition >header ul li{display:inline-block;padding:0 0.2em 0 0;}article.definition >header .visibility{display:none;}article.definition >header .visibility,article.definition >header .type{text-transform:lowercase;}article.definition >header .source-link{visibility:hidden;float:right;}article.definition >header .source-link:after{visibility:visible;content:"[SRC]";}article.definition .docstring{margin:0 0 0 1em;}article.definition .docstring pre{font-size:0.8em;white-space:pre-wrap;}.definition.package >header ul.nicknames{display:inline-block;list-style:none;margin:0;padding:0 0 0 1em;}.definition.package >header ul.nicknames li{display:inline;}.definition.package >header ul.nicknames:before{content:"(";}.definition.package >header ul.nicknames:after{content:")";}.definition.package ul.definitions{margin:0;list-style:none;padding:0 0 0 0.5em;}.definition.callable >header .name:before,.definition.type >header .name:before{content:"(";font-weight:normal;}.definition.callable >header .arguments:after,.definition.type >header .arguments:after{content:")";}.definition.callable >header .arguments .arguments:before,.definition.type >header .arguments .arguments:before{content:"(";}.definition.callable >header .arguments .argument,.definition.type >header .arguments .argument{padding:0;}.definition.callable >header .arguments .argument.lambda-list-keyword,.definition.type >header .arguments .argument.lambda-list-keyword{color:#991155;}.definition li>mark{background:none;border-left:0.3em solid #0088EE;padding-left:0.3em;display:block;}@media (min-width: 1300px){html body{padding-left:16em;}article.project #toc{margin:0;position:fixed;left:0;top:0;bottom:0;width:15em;overflow-y:auto;background:#F0F0F0;border-right:1px solid #A0A0A0;}}</style> </head> <body> <article class="project"> <header>   <h1>memory regions</h1>   <span class="version">1.1.0</span>    <p class="description">Implementation of a memory region abstraction</p>   </header> <section id="toc"> <h2>Table of Contents</h2> <nav> <a href="#project">Top</a>  <a href="#documentation">Documentation</a> <nav> <a href="#about memory-regions">About memory-regions</a>  <a href="#how to">How To</a> </nav>  <a href="#system">System</a>  <a href="#system">Packages</a> <nav> <a href="#PACKAGE%20ORG.SHIRAKUMO.MEMORY-REGIONS">ORG.SHIRAKUMO.MEMORY-REGIONS</a> </nav>  </nav> </section>  <section id="documentation"><article><h2 id="about memory-regions">About memory-regions</h2><p>This library implements the concept of a &quot;memory region&quot; along with several useful tools to deal with them. A memory region is simply a pointer with a size, to provider safer access to foreign memory.</p><h2 id="how to">How To</h2><p>Load the memory-regions system, or one of its subsystems if you only need select parts of the library.</p><p>Specifically:</p><ul><li><p><code>memory-regions/region</code><br>Provides the base memory region type and protocol.</p></li><li><p><code>memory-regions/allocator</code><br>Provides the allocator protocol and some base implementations.</p></li><li><p><code>memory-regions/sequence</code><br>Provides the ability to coerce a memory region to a sequence.</p></li><li><p><code>memory-regions/static-vector</code><br>Provides a memory region type with static-vector backing storage.</p></li><li><p><code>memory-regions/stream</code><br>Provides the ability to coerce a memory region to a stream.</p></li><li><p><code>memory-regions/object</code><br>Provides the ability to coerce a memory region to an object.</p></li><li><p><code>memory-regions/pathname</code><br>Provides the ability to turn files into memory regions.</p></li><li><p><code>memory-regions</code><br>All of the above.</p></li></ul><p>Memory regions can be created in a couple of ways:</p><ul><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">memory-region</a></code><br>Create a memory region directly from a raw pointer and size.<br>The region will not know anything about memory ownership and it is up to you to ensure that it is not dereferenced after the memory has been freed.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION" class="xref">to-memory-region</a></code><br>Coerce another object to a memory region. This will only work for objects that are backed by a memory region themselves, or otherwise have memory that remains static and does not move.</p></li><li><p><code><a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION" class="xref">with-memory-region</a></code><br>Coerce another object to a memory region. This will notably work for more objects than <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION" class="xref">to-memory-region</a></code>, such as standard vectors and arrays, as those can be pinned in place for the duration of the body. This also means that it is a very bad idea to use the provided memory region outside of the body or let it escape in some other way.</p></li><li><p><code><a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION" class="xref">static-vector-memory-region</a></code><br>Creates a new memory region with a Lisp static-vector as its storage. This allows you to address the region's memory directly as a lisp vector.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATE" class="xref">allocate</a></code><br>Allocate a memory region within the context of an <code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">allocator</a></code>. See <code><a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-ARENA" class="xref">with-arena</a></code> as well for lexically scoped regions. Using the <code>NIL</code> allocator is equivalent to manually allocating memory and constructing a region with it.</p></li></ul><p>In the last case you can also make use of several other functions to manipulate memory regions:</p><ul><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ADEALLOCATE" class="xref">deallocate</a></code><br>Free the represented memory again. This invalidates the memory region.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREALLOCATE" class="xref">reallocate</a></code><br>Change the size of the memory region. This may move the memory region's pointer, though, so beware of using this if you passed the raw pointer elsewhere.</p></li></ul><p>You can also use memory regions as a convenient way to manipulate the memory they back:</p><ul><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACLEAR" class="xref">clear</a></code><br>Clears the backed memory out with zeroes.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFILL" class="xref">fill</a></code><br>Fills the backed memory with the provided byte.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREPLACE" class="xref">replace</a></code><br>Replaces the backed memory contents with data from the provided source. This is notably nice because both the destination and source can be things that <code><a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION" class="xref">with-memory-region</a></code> can coerce.</p></li></ul><p>Finally, with the above extension systems you can also use memory regions in conjunction with other libraries that usually can't directly interface with foreign memory:</p><ul><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-STREAM" class="xref">to-stream</a></code><br>Creates a binary-stream that is backed by the memory region. You can transparently write to and read from this, making it especially useful for getting file format libraries to parse from memory directly.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-SEQUENCE" class="xref">to-sequence</a></code><br>Creates a sequence that is backed by the memory region. The nice thing about this wrapper is that it can wrap even complex CFFI types, providing a more lisp-native access to foreign memory.</p></li><li><p><code><a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-OBJECT" class="xref">to-object</a></code><br>Creates an object that is backed by the memory region. This allows you to access a foreign structure's slots via <code><a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASLOT-VALUE" class="xref">slot-value</a></code>.</p></li></ul></article></section>    <section id="system"> <h2>System Information</h2>  <div class="row"> <label for="version">Version:</label> <a id="version">1.1.0</a> </div>   <div class="row"> <label for="dependencies">Dependencies:</label> <ul id="dependencies"><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/region</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/allocator</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/sequence</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/stream</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/object</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/pathname</a></li><li><a class="external" href="https://shinmera.github.io/memory-regions/">memory-regions/static-vector</a></li></ul> </div>   <div class="row" id="author"> <label for="author">Author:</label> <a href="mailto:shinmera@tymoon.eu">Yukari Hafner</a> </div>   <div class="row"> <label for="license">License:</label> <a id="license" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/LICENSE">zlib</a> </div>   <div class="row"> <label for="homepage">Homepage:</label> <a id="homepage" href="https://shinmera.github.io/memory-regions/">https://shinmera.github.io/memory-regions/</a> </div>   <div class="row"> <label for="bug-tracker">Bug Tracker:</label> <a id="bug-tracker" href="https://github.com/shinmera/memory-regions/issues">https://github.com/shinmera/memory-regions/issues</a> </div>   <div class="row"> <label for="sources">Sources:</label> <a id="sources" href="https://github.com/shinmera/memory-regions.git">https://github.com/shinmera/memory-regions.git</a> </div>  </section>    <section id="index"> <h2>Definition Index</h2> <ul> <li> <article class="definition package" id="PACKAGE ORG.SHIRAKUMO.MEMORY-REGIONS"> <header> <h3> <a href="#PACKAGE%20ORG.SHIRAKUMO.MEMORY-REGIONS">ORG.SHIRAKUMO.MEMORY-REGIONS</a> </h3> <ul class="nicknames"></ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> <ul class="definitions"> <li> <article class="definition special-variable" id="VARIABLE ORG.SHIRAKUMO.MEMORY-REGIONS:*ALLOCATOR*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2AALLOCATOR%2A">*ALLOCATOR*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L35">Source</a>  </header> <div class="docstring"><pre>Holds the default allocator used for allocation operations.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-ARENA" class="xref">WITH-ARENA</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE ORG.SHIRAKUMO.MEMORY-REGIONS:*STACK-ALLOCATION-SIZE-LIMIT*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2ASTACK-ALLOCATION-SIZE-LIMIT%2A">*STACK-ALLOCATION-SIZE-LIMIT*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L3">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition special-variable" id="VARIABLE ORG.SHIRAKUMO.MEMORY-REGIONS:*STANDARD-ALLOCATOR*"> <header> <span class="visibility">EXTERNAL</span> <span class="type">SPECIAL-VARIABLE</span> <h4 class="name"> <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2ASTANDARD-ALLOCATOR%2A">*STANDARD-ALLOCATOR*</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L36">Source</a>  </header> <div class="docstring"><pre>Holds the class name of the default allocator used for new arenas.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-ARENA" class="xref">WITH-ARENA</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:ALLOCATOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR">ALLOCATOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L15">Source</a>  </header> <div class="docstring"><pre>Representation of an allocation manager that can hand out regions.

If you plan on implementing your own allocator, you must implement the
related functions.

You may also use NIL with any of the allocation functions, in which
case the C runtime allocator (malloc, etc) is used.

When you use T with any of the allocation functions, the current value
of the *ALLOCATOR* variable is used.

In order to free the allocator itself you should pass it to DEALLOCATE
with NIL as the region.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATE" class="xref">ALLOCATE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ADEALLOCATE" class="xref">DEALLOCATE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREALLOCATE" class="xref">REALLOCATE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATOTAL-SIZE" class="xref">TOTAL-SIZE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFREE-SPACE" class="xref">FREE-SPACE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AUSED-SPACE" class="xref">USED-SPACE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMINIMUM-BLOCK-SIZE" class="xref">MINIMUM-BLOCK-SIZE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMAXIMUM-BLOCK-SIZE" class="xref">MAXIMUM-BLOCK-SIZE</a>
See <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2AALLOCATOR%2A" class="xref">*ALLOCATOR*</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-ARENA" class="xref">WITH-ARENA</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACLEAR" class="xref">CLEAR</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:BUMP-ALLOCATOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ABUMP-ALLOCATOR">BUMP-ALLOCATOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/bump-allocator.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Implementation of a simple bump allocator.

Allocations using this will be as fast as possible. Deallocations are
only regarded if the region is the last region that was allocated. The
idea being that you typically don't deallocate individual regions, and
instead CLEAR or DEALLOCATE the allocator itself when you're done.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-ISH"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH">MEMORY-REGION-ISH</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L213">Source</a>  </header> <div class="docstring"><pre>Superclass for all objects that can be coerced to a memory region.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION" class="xref">TO-MEMORY-REGION</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACALL-WITH-MEMORY-REGION" class="xref">CALL-WITH-MEMORY-REGION</a>
See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTART" class="xref">START</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AEND" class="xref">END</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASIZE" class="xref">SIZE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACLEAR" class="xref">CLEAR</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFILL" class="xref">FILL</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREPLACE" class="xref">REPLACE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASUBREGION" class="xref">SUBREGION</a></pre></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-OBJECT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-OBJECT">MEMORY-REGION-OBJECT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/object.lisp#L38">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-SEQUENCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-SEQUENCE">MEMORY-REGION-SEQUENCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/sequence.lisp#L3">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition class" id="CLASS ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CLASS</span> <h4 class="name"> <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-STREAM">MEMORY-REGION-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/stream.lisp#L3">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition condition" id="CONDITION ORG.SHIRAKUMO.MEMORY-REGIONS:ALLOCATOR-CONDITION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR-CONDITION">ALLOCATOR-CONDITION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Supertype for conditions related to allocators.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION ORG.SHIRAKUMO.MEMORY-REGIONS:BLOCK-TOO-BIG"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ABLOCK-TOO-BIG">BLOCK-TOO-BIG</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Error signalled when a block that is too big for the allocator is requested.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASIZE" class="xref">SIZE</a>
See <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR-CONDITION" class="xref">ALLOCATOR-CONDITION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition condition" id="CONDITION ORG.SHIRAKUMO.MEMORY-REGIONS:OUT-OF-MEMORY"> <header> <span class="visibility">EXTERNAL</span> <span class="type">CONDITION</span> <h4 class="name"> <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AOUT-OF-MEMORY">OUT-OF-MEMORY</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L6">Source</a>  </header> <div class="docstring"><pre>Error signalled when an allocation request cannot be fulfilled.

See <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR-CONDITION" class="xref">ALLOCATOR-CONDITION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION">MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><pre>Representation of a region of memory.

This is a pointer and a size.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-POINTER" class="xref">MEMORY-REGION-POINTER</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-SIZE" class="xref">MEMORY-REGION-SIZE</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-VALID-P" class="xref">MEMORY-REGION-VALID-P</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION" class="xref">TO-MEMORY-REGION</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACALL-WITH-MEMORY-REGION" class="xref">CALL-WITH-MEMORY-REGION</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTART" class="xref">START</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AEND" class="xref">END</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASIZE" class="xref">SIZE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACLEAR" class="xref">CLEAR</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFILL" class="xref">FILL</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREPLACE" class="xref">REPLACE</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASUBREGION" class="xref">SUBREGION</a></pre></div> </article> </li>  <li> <article class="definition structure" id="STRUCTURE ORG.SHIRAKUMO.MEMORY-REGIONS:STATIC-VECTOR-MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">STRUCTURE</span> <h4 class="name"> <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION">STATIC-VECTOR-MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments"></ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/static-vector.lisp#L3">Source</a>  </header> <div class="docstring"><pre>Representation of a memory region using a static-vector backing.

These regions will survive an image dump and their underlying memory
is accessible as a Lisp vector as well. Note that while they will
survive dumping, the address of the region may differ after dump.

Calling DEALLOCATE with NIL as the allocator will deallocate the
underlying static-vector as well.

See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION" class="xref">STATIC-VECTOR-MEMORY-REGION</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-VECTOR" class="xref">MEMORY-REGION-VECTOR</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION">MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">POINTER</li>    <li class="argument">SIZE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-POINTER"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-POINTER">MEMORY-REGION-POINTER</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTANCE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><pre>Returns the pointer to the memory region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:(SETF MEMORY-REGION-POINTER)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%28SETF%20MEMORY-REGION-POINTER%29">(SETF MEMORY-REGION-POINTER)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">INSTANCE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-SIZE">MEMORY-REGION-SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">INSTANCE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><pre>Returns the number of octets the memory region encompasses.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:(SETF MEMORY-REGION-SIZE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%28SETF%20MEMORY-REGION-SIZE%29">(SETF MEMORY-REGION-SIZE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VALUE</li>    <li class="argument">INSTANCE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L38">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-VALID-P"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-VALID-P">MEMORY-REGION-VALID-P</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L46">Source</a>  </header> <div class="docstring"><pre>Returns true if the memory region is valid and may be accessed.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MEMORY-REGION-VECTOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-VECTOR">MEMORY-REGION-VECTOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/static-vector.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Returns the underlying static-vector backing the memory-region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION" class="xref">STATIC-VECTOR-MEMORY-REGION (type)</a></pre></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:(SETF MEMORY-REGION-VECTOR)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%28SETF%20MEMORY-REGION-VECTOR%29">(SETF MEMORY-REGION-VECTOR)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">VECTOR</li>    <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/static-vector.lisp#L12">Source</a>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition function callable" id="FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:STATIC-VECTOR-MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">FUNCTION</span> <h4 class="name"> <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION">STATIC-VECTOR-MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">LENGTH/VEC</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/static-vector.lisp#L22">Source</a>  </header> <div class="docstring"><pre>Creates a new memory region with static-vector backing.

The argument may either be the length (in octets) of the storage, or a
static-vector. Note that this call cannot check whether the vector you
passed is actually a static-vector as allocated by
STATIC-VECTORS:MAKE-STATIC-VECTOR and things will break badly if you
pass anything else.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTATIC-VECTOR-MEMORY-REGION" class="xref">STATIC-VECTOR-MEMORY-REGION (type)</a>
See STATIC-VECTORS:MAKE-STATIC-VECTOR</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:ALLOCATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATE">ALLOCATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument">SIZE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L17">Source</a>  </header> <div class="docstring"><pre>Allocate a new memory-region.

The allocator may provide a region that is bigger than the requested
size, but not smaller. If the allocator would have to shrink the
region to provide the block of memory, an error of type BLOCK-TOO-BIG
must be signalled, instead. If the allocator cannot allocate the
requested amount of memory at all, an error of type OUT-OF-MEMORY is
signalled, instead.

The data pointed to by the returned region is *NOT* guaranteed to have
been cleared out and may contain random non-zero data.

SIZE must be a positive fixnum.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a>
See <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ABLOCK-TOO-BIG" class="xref">BLOCK-TOO-BIG (type)</a>
See <a href="#CONDITION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AOUT-OF-MEMORY" class="xref">OUT-OF-MEMORY (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:ALLOCATOR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR">ALLOCATOR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">CONDITION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Returns the allocator related to the condition.

See ALLOCATOR-ERROR</pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:CALL-WITH-MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACALL-WITH-MEMORY-REGION">CALL-WITH-MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">FUNCTION</li>    <li class="argument">DATA</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">START</li>    <li class="argument">OFFSET</li>    <li class="argument">DIRECTION</li>    <li class="argument">SIZE</li>    <li class="argument lambda-list-keyword">&amp;ALLOW-OTHER-KEYS</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L9">Source</a>  </header> <div class="docstring"><pre>Calls the function with the argument coerced to a memory region.

The passed memory region is only valid within the dynamic extent of
the function call, and may not be accessed outside of it.

You may pass OFFSET to provide a starting offset into the resulting
memory region, as well as potentially other arguments depending on the
source.

If a CFFI:FOREIGN-POINTER is passed as the source, you must also pass
a SIZE argument to provide the memory region's extents.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION" class="xref">TO-MEMORY-REGION</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION" class="xref">WITH-MEMORY-REGION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:CLEAR"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACLEAR">CLEAR</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L10">Source</a>  </header> <div class="docstring"><pre>Clears the memory region and fills it with zeroes.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:DEALLOCATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ADEALLOCATE">DEALLOCATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L18">Source</a>  </header> <div class="docstring"><pre>Free a previously allocated memory-region.

The passed memory region must have been provided by a call to ALLOCATE
of the same allocator. Passing unrelated region objects will lead to
undefined behaviour.

The returned memory region will no longer be valid. Passing in an
invalid region has no effect.

If you pass NIL as the memory region, the allocator itself will be
deallocated, after which it must not be used again.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a>
See <a href="#FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-VALID-P" class="xref">MEMORY-REGION-VALID-P</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATE" class="xref">ALLOCATE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:END"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AEND">END</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L6">Source</a>  </header> <div class="docstring"><pre>Returns a pointer to the end of the memory region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:FILL"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFILL">FILL</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">DST</li>    <li class="argument">BYTE</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">START</li>    <li class="argument">END</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L11">Source</a>  </header> <div class="docstring"><pre>Fills the memory region with a specific octet.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:FREE-SPACE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AFREE-SPACE">FREE-SPACE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L21">Source</a>  </header> <div class="docstring"><pre>Returns the remaining number of octets the allocator can distribute to memory-regions.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MAXIMUM-BLOCK-SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMAXIMUM-BLOCK-SIZE">MAXIMUM-BLOCK-SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L24">Source</a>  </header> <div class="docstring"><pre>Returns the maximal size a memory-region can have under this allocator.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:MINIMUM-BLOCK-SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMINIMUM-BLOCK-SIZE">MINIMUM-BLOCK-SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L23">Source</a>  </header> <div class="docstring"><pre>Returns the minimal size of an allocated memory-region.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:REALLOCATE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREALLOCATE">REALLOCATE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument">REGION</li>    <li class="argument">NEW-SIZE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L19">Source</a>  </header> <div class="docstring"><pre>Resizes a previously allocated memory-region.

The passed memory region must have been provided by a call to ALLOCATE
of the same allocator. Passing unrelated region objects will lead to
undefined behaviour.

The memory region's pointer and size are modified in-place, if the
reallocation is successful, and the data pointed to will be
preserved. If the region's size is increased, octets beyond the
previous size are *NOT* guaranteed to have been cleared and may
contain random non-zero data.

The same constraints and error behaviour as for ALLOCATE apply.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATE" class="xref">ALLOCATE</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:REPLACE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AREPLACE">REPLACE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">DST</li>    <li class="argument">SRC</li>    <li class="argument lambda-list-keyword">&amp;KEY</li>    <li class="argument">START1</li>    <li class="argument">END1</li>    <li class="argument">START2</li>    <li class="argument">END2</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L12">Source</a>  </header> <div class="docstring"><pre>Replaces the memory region's contents with that of another.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASIZE">SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L7">Source</a>  </header> <div class="docstring"><pre>Returns the number of octets represented by the memory region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:(SETF SIZE)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%28SETF%20SIZE%29">(SETF SIZE)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:START"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASTART">START</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L5">Source</a>  </header> <div class="docstring"><pre>Returns a pointer to the start of the memory region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:(SETF START)"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%28SETF%20START%29">(SETF START)</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">NEW-VALUE</li>    <li class="argument">OBJECT</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:SUBREGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ASUBREGION">SUBREGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGION</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">START</li>    <li class="argument">END</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L13">Source</a>  </header> <div class="docstring"><pre>Returns a sub-region of the given memory-region.

The following restrictions apply:
  - START and END must both be positive fixnums
  - START must be less than or equal to END
  - END must be less than the memory region's SIZE

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-ISH" class="xref">MEMORY-REGION-ISH (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:TO-MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-MEMORY-REGION">TO-MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">THING</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L8">Source</a>  </header> <div class="docstring"><pre>Coerces the given argument to a memory region.

See <a href="#STRUCTURE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION" class="xref">MEMORY-REGION (type)</a>
See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACALL-WITH-MEMORY-REGION" class="xref">CALL-WITH-MEMORY-REGION</a>
See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION" class="xref">WITH-MEMORY-REGION</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:TO-OBJECT"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-OBJECT">TO-OBJECT</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">OBJECT</li>    <li class="argument">STRUCTURE-TYPE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><i>No documentation provided.</i></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:TO-SEQUENCE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-SEQUENCE">TO-SEQUENCE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">SEQUENCE</li>    <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>    <li class="argument">ELEMENT-TYPE</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Coerces the given thing to a sequence.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-SEQUENCE" class="xref">MEMORY-REGION-SEQUENCE (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:TO-STREAM"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATO-STREAM">TO-STREAM</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">STREAM</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  </header> <div class="docstring"><pre>Coerces the given thing to a stream.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AMEMORY-REGION-SEQUENCE" class="xref">MEMORY-REGION-SEQUENCE (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:TOTAL-SIZE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ATOTAL-SIZE">TOTAL-SIZE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L20">Source</a>  </header> <div class="docstring"><pre>Returns the total number of octets the allocator can distribute to memory-regions.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition generic-function callable" id="GENERIC-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:USED-SPACE"> <header> <span class="visibility">EXTERNAL</span> <span class="type">GENERIC-FUNCTION</span> <h4 class="name"> <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AUSED-SPACE">USED-SPACE</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">ALLOCATOR</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L22">Source</a>  </header> <div class="docstring"><pre>Returns the number of octets that are currently distributed to memory-regions.

See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:WITH-ARENA"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-ARENA">WITH-ARENA</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">SIZE</li>  <li class="argument lambda-list-keyword">&amp;OPTIONAL</li>  <li class="argument">TYPE</li>  <li class="argument lambda-list-keyword">&amp;REST</li>  <li class="argument">ARGS</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/allocator.lisp#L38">Source</a>  </header> <div class="docstring"><pre>Executes body with an arena allocator bound.

Any memory-regions allocated by the allocator may only be referenced
within the dynamic-extent of the BODY. Attempting to do so outside of
that dynamic-extent leads to undefined behaviour.

As much as possible the arena will be stack-allocated.

See <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2ASTANDARD-ALLOCATOR%2A" class="xref">*STANDARD-ALLOCATOR*</a>
See <a href="#VARIABLE%20ORG.SHIRAKUMO.MEMORY-REGIONS%3A%2AALLOCATOR%2A" class="xref">*ALLOCATOR*</a>
See <a href="#CLASS%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AALLOCATOR" class="xref">ALLOCATOR (type)</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:WITH-MEMORY-REGION"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION">WITH-MEMORY-REGION</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">REGION</li>  <li class="argument">DATA/SIZE</li>  <li class="argument lambda-list-keyword">&amp;REST</li>  <li class="argument">ARGS</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L15">Source</a>  </header> <div class="docstring"><pre>Convenience macro to dynamically create a memory region.

If the source is a positive fixnum constant, the memory area is allocated
directly on the stack.

See <a href="#GENERIC-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3ACALL-WITH-MEMORY-REGION" class="xref">CALL-WITH-MEMORY-REGION</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:WITH-MEMORY-REGIONS"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGIONS">WITH-MEMORY-REGIONS</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <li class="argument">REGIONS</li>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/memory-region.lisp#L30">Source</a>  </header> <div class="docstring"><pre>Convenience macro to dynamically create multiple memory regions.

The bindings are sequential as by LET*.

See <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-MEMORY-REGION" class="xref">WITH-MEMORY-REGION</a></pre></div> </article> </li>  <li> <article class="definition macro callable" id="MACRO-FUNCTION ORG.SHIRAKUMO.MEMORY-REGIONS:WITH-POINTER-TO-ARRAY-DATA"> <header> <span class="visibility">EXTERNAL</span> <span class="type">MACRO</span> <h4 class="name"> <a href="#MACRO-FUNCTION%20ORG.SHIRAKUMO.MEMORY-REGIONS%3AWITH-POINTER-TO-ARRAY-DATA">WITH-POINTER-TO-ARRAY-DATA</a> </h4> <ul class="qualifiers"></ul> <ul class="arguments">  <ul class="arguments"> <li class="argument">PTR</li>  <li class="argument">DATA</li>  <li class="argument lambda-list-keyword">&amp;KEY</li>  <li class="argument">DIRECTION</li>  <li class="argument lambda-list-keyword">&amp;REST</li> </ul>    <li class="argument lambda-list-keyword">&amp;BODY</li>    <li class="argument">BODY</li>    <li class="argument lambda-list-keyword">&amp;REST</li>  </ul>  <a class="source-link" href="https://github.com/shinmera/memory-regions/blob/04dd8a501fe8483671f745dfa00be07796e40920/toolkit.lisp#L43">Source</a>  </header> <div class="docstring"><pre>Provides a foreign pointer to the array contents.

DIRECTION must be one of:
  :INPUT  --- The data is only read
  :OUTPUT --- The data is only written
  :IO     --- The data is both read and written

As much as possible the provided pointer will literally point to the
array's in-memory representation. When this is not possible, a foreign
memory area is used instead, and the data is transferred as informed
by the DIRECTION argument.</pre></div> </article> </li> </ul> </article> </li> </ul> </section>  </article> <script>window.addEventListener("DOMContentLoaded", function(){
    var unmarkElement = function(el){
        if(el.tagName === "mark" || el.tagName === "MARK"){
            [].forEach.call(el.childNodes, function(child){
                el.parentNode.insertBefore(child, el);
            });
            el.parentNode.removeChild(el);
        }else if(el.parentNode.tagName === "mark"){
            return unmarkElement(el.parentNode);
        }
        return null;
    }

    var unmarkAll = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("mark"), unmarkElement);
    }
    
    var markElement = function(el){
        if(el.parentNode.tagName === "mark" || el.parentNode.tagName === "MARK"){
            return el.parentNode;
        } else {
            unmarkAll();
            var marked = document.createElement("mark");
            el.parentNode.insertBefore(marked, el);
            marked.appendChild(el);
            return marked;
        }
    }

    var markFragmented = function(){
        if(window.location.hash){
            var el = document.getElementById(decodeURIComponent(window.location.hash.substr(1)));
            if(el) markElement(el);
        }
    }

    var registerXrefLink = function(link){
        var el = document.getElementById(decodeURIComponent(link.getAttribute("href").substr(1)));
        if(el){
            link.addEventListener("click", function(){
                markElement(el);
            });
        }
    }

    var registerXrefLinks = function(root){
        root = root || document;
        [].forEach.call(root.querySelectorAll("a.xref"), registerXrefLink);
    }

    markFragmented();
    registerXrefLinks();
}); </script> </body> </html> 